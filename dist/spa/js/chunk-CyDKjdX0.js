import{b6 as Ae,r as d,j as e,L as se,b7 as ae,Q as le,b5 as Te,b8 as Be,b9 as Le,b1 as te,b2 as ne,ba as ie,bb as re,x as D,aX as ce,aY as de,F as oe,bc as xe,bd as H,p as $,aW as Fe,H as me}from"./chunk-BfPIZJcL.js";import{u as De,a as $e,B as r,E as c,C as I,g as V,h as he,c as M,I as ue,S as y,j as w,k as C,l as S,m as i,F as Pe,G as Oe,b as _,H as ze,J as Ee,K as Re,M as Ue,i as He,D as Ie,x as Ve,y as Me,z as Ke,A as We,N as qe}from"./chunk-CnxcrpIl.js";import{a as ge}from"./chunk-VjddRPxg.js";import{m as b}from"./chunk-DakqyWim.js";function Ze(){const{country:p}=Ae(),{hasPermission:je}=De(),{toast:k}=$e(),[h,fe]=d.useState([]),[t,K]=d.useState(!0),[A,W]=d.useState(null),[f,T]=d.useState(""),[u,B]=d.useState("all"),[g,L]=d.useState("all"),[P,q]=d.useState("asc"),[o,J]=d.useState("grid"),[Q,O]=d.useState(!1),[Ne,G]=d.useState(!1),[l,be]=d.useState(null),[pe,F]=d.useState(!1),[ve,z]=d.useState(!1),[ye,E]=d.useState(null),R=je("view_buying_price"),x={ksa:{name:"Saudi Arabia",flag:"ðŸ‡¸ðŸ‡¦",code:"KSA"},uae:{name:"United Arab Emirates",flag:"ðŸ‡¦ðŸ‡ª",code:"UAE"},qatar:{name:"Qatar",flag:"ðŸ‡¶ðŸ‡¦",code:"QAT"},kuwait:{name:"Kuwait",flag:"ðŸ‡°ðŸ‡¼",code:"KWT"},oman:{name:"Oman",flag:"ðŸ‡´ðŸ‡²",code:"OMN"},bahrain:{name:"Bahrain",flag:"ðŸ‡§ðŸ‡­",code:"BHR"},jordan:{name:"Jordan",flag:"ðŸ‡¯ðŸ‡´",code:"JOR"},lebanon:{name:"Lebanon",flag:"ðŸ‡±ðŸ‡§",code:"LBN"}}[p?.toLowerCase()];d.useEffect(()=>{p&&v()},[p]);const v=async(s=!0)=>{if(p)try{s?(K(!0),O(!1)):O(!0),W(null);const a=p.toUpperCase();console.log(`ðŸŽ« Loading tickets for country: ${a}`);const n=await ge.getTicketsByCountry(a);console.log(`âœ… Tickets response for ${a}:`,n),console.log(`ðŸ“Š Found ${n.tickets?.length||0} tickets`),fe(n.tickets||[])}catch(a){console.error(`âŒ Error loading tickets for ${p}:`,a),W(a.message||"Failed to load tickets"),k({title:"Error",description:"Failed to load tickets. Please try again.",variant:"destructive"})}finally{K(!1),O(!1)}},we=()=>{v(!1)},U=[...new Set(h.map(s=>s.batch.airline_name))],j=h.filter(s=>{const a=s.batch.airline_name.toLowerCase().includes(f.toLowerCase())||s.flight_number.toLowerCase().includes(f.toLowerCase())||s.batch.agent_name.toLowerCase().includes(f.toLowerCase()),n=u==="all"||s.status===u,N=g==="all"||s.batch.airline_name===g;return a&&n&&N}).sort((s,a)=>P==="asc"?s.selling_price-a.selling_price:a.selling_price-s.selling_price),X=s=>{try{return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return s}},Y=s=>s||"--:--",Ce=()=>{const s=[["Flight Number","Airline","Date","Time","Status","Price","Available Seats"],...j.map(m=>[m.flight_number,m.batch.airline_name,m.batch.flight_date,m.batch.flight_time,m.status,m.selling_price,m.available_seats])].map(m=>m.join(",")).join(`
`),a=new Blob([s],{type:"text/csv"}),n=window.URL.createObjectURL(a),N=document.createElement("a");N.href=n,N.download=`${x?.name||"country"}_tickets.csv`,document.body.appendChild(N),N.click(),document.body.removeChild(N),window.URL.revokeObjectURL(n)},Z=s=>{switch(s){case"available":return e.jsx(_,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Available"});case"booked":return e.jsx(_,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Booked"});case"locked":return e.jsx(_,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Locked"});case"sold":return e.jsx(_,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:"Sold Out"});default:return e.jsx(_,{variant:"outline",children:"Unknown"})}},ee=s=>{const a=h.find(n=>n.id===s);a&&(E(a),z(!0))},Se=async s=>{try{console.log("Creating booking with data:",s);const a=await ge.createBooking(s);k({title:"Booking Created Successfully! ðŸŽ‰",description:`Booking ID: ${a.bookingId} | Passenger: ${s.passengerInfo.name}`}),await v(!1),z(!1),E(null),setTimeout(()=>{k({title:"Next Steps",description:"Check the Bookings section to manage this booking and process payments."})},2e3)}catch(a){console.error("Error creating booking:",a);let n="Failed to create booking. Please try again.";a.message&&(a.message.includes("not available")?n="This ticket is no longer available for booking.":a.message.includes("validation")?n="Please check all required fields and try again.":n=a.message),k({title:"Booking Failed âŒ",description:n,variant:"destructive"}),n.includes("not available")&&await v(!1)}},_e=s=>{const a=h.find(n=>n.id===s);a&&(be(a),F(!0))},ke=(s,a)=>a===0?0:Math.round(s/a*100);return x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(se,{to:"/countries",children:e.jsxs(r,{variant:"outline",size:"sm",className:"font-body",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:x.flag}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl lg:text-3xl font-heading font-bold velvet-text",children:[x.name," Flights"]}),e.jsxs("p",{className:"text-foreground/70 font-body text-sm lg:text-base",children:["Available flights to ",x.name]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(r,{onClick:we,variant:"outline",size:"sm",disabled:Q,className:"font-body",children:[e.jsx(le,{className:`h-4 w-4 mr-2 ${Q?"animate-spin":""}`}),"Refresh"]}),e.jsxs(r,{onClick:Ce,variant:"outline",size:"sm",className:"font-body",disabled:j.length===0,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs("div",{className:"flex items-center space-x-1 border rounded-md p-1",children:[e.jsx(r,{variant:o==="grid"?"default":"ghost",size:"sm",onClick:()=>J("grid"),className:"h-8 w-8 p-0",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(r,{variant:o==="list"?"default":"ghost",size:"sm",onClick:()=>J("list"),className:"h-8 w-8 p-0",children:e.jsx(Le,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"luxury-card p-4 rounded-lg border-0 text-center",children:[e.jsx("div",{className:"text-xl font-heading font-bold text-green-600 velvet-text",children:t?e.jsx(c,{className:"h-6 w-8 mx-auto"}):j.filter(s=>s.status==="available").length}),e.jsx("p",{className:"text-xs font-body text-foreground/60",children:"Available"})]}),e.jsxs("div",{className:"luxury-card p-4 rounded-lg border-0 text-center",children:[e.jsx("div",{className:"text-xl font-heading font-bold text-blue-600 velvet-text",children:t?e.jsx(c,{className:"h-6 w-8 mx-auto"}):j.reduce((s,a)=>s+a.available_seats,0)}),e.jsx("p",{className:"text-xs font-body text-foreground/60",children:"Total Seats"})]}),e.jsxs("div",{className:"luxury-card p-4 rounded-lg border-0 text-center",children:[e.jsx("div",{className:"text-xl font-heading font-bold text-primary velvet-text",children:t?e.jsx(c,{className:"h-6 w-8 mx-auto"}):U.length}),e.jsx("p",{className:"text-xs font-body text-foreground/60",children:"Airlines"})]}),e.jsxs("div",{className:"luxury-card p-4 rounded-lg border-0 text-center",children:[e.jsx("div",{className:"text-xl font-heading font-bold text-orange-600 velvet-text",children:t?e.jsx(c,{className:"h-6 w-8 mx-auto"}):h.length}),e.jsx("p",{className:"text-xs font-body text-foreground/60",children:"Total Tickets"})]})]})]}),e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:e.jsxs(I,{className:"luxury-card border-0",children:[e.jsx(V,{children:e.jsxs(he,{className:"font-heading velvet-text flex items-center space-x-2",children:[e.jsx(te,{className:"h-5 w-5"}),e.jsx("span",{children:"Filter Flights"})]})}),e.jsxs(M,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative md:col-span-2 lg:col-span-1",children:[e.jsx(ne,{className:"absolute left-3 top-3 h-4 w-4 text-foreground/40"}),e.jsx(ue,{placeholder:"Search flights, airlines, agents...",value:f,onChange:s=>T(s.target.value),className:"pl-10 font-body",disabled:t})]}),e.jsxs(y,{value:u,onValueChange:B,disabled:t,children:[e.jsx(w,{className:"font-body",children:e.jsx(C,{placeholder:"Filter by status"})}),e.jsxs(S,{children:[e.jsx(i,{value:"all",children:"All Status"}),e.jsx(i,{value:"available",children:"Available"}),e.jsx(i,{value:"booked",children:"Booked"}),e.jsx(i,{value:"locked",children:"Locked"}),e.jsx(i,{value:"sold",children:"Sold"})]})]}),e.jsxs(y,{value:g,onValueChange:L,disabled:t,children:[e.jsx(w,{className:"font-body",children:e.jsx(C,{placeholder:"Filter by airline"})}),e.jsxs(S,{children:[e.jsx(i,{value:"all",children:"All Airlines"}),U.map(s=>e.jsx(i,{value:s,children:s},s))]})]}),e.jsxs(y,{value:P,onValueChange:q,disabled:t,children:[e.jsx(w,{className:"font-body",children:e.jsx(C,{placeholder:"Sort by price"})}),e.jsxs(S,{children:[e.jsx(i,{value:"asc",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Price: Low to High"]})}),e.jsx(i,{value:"desc",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Price: High to Low"]})})]})]}),e.jsx("div",{className:"flex items-center justify-between md:col-span-2 lg:col-span-1",children:e.jsx("div",{className:"font-body text-sm text-foreground/70",children:t?e.jsx(c,{className:"h-4 w-20"}):`${j.length} flights found`})})]})}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-3 h-4 w-4 text-foreground/40"}),e.jsx(ue,{placeholder:"Search flights...",value:f,onChange:s=>T(s.target.value),className:"pl-10 font-body",disabled:t})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Pe,{open:Ne,onOpenChange:G,children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(r,{variant:"outline",size:"sm",className:"font-body",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Filters",(u!=="all"||g!=="all")&&e.jsx(_,{className:"ml-2 h-5 w-5 p-0 text-xs bg-primary text-primary-foreground",children:[u!=="all",g!=="all"].filter(Boolean).length})]})}),e.jsxs(ze,{children:[e.jsxs(Ee,{children:[e.jsx(Re,{children:"Filter Options"}),e.jsx(Ue,{children:"Customize your flight search"})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(y,{value:u,onValueChange:B,disabled:t,children:[e.jsx(w,{className:"font-body mt-1",children:e.jsx(C,{placeholder:"Filter by status"})}),e.jsxs(S,{children:[e.jsx(i,{value:"all",children:"All Status"}),e.jsx(i,{value:"available",children:"Available"}),e.jsx(i,{value:"booked",children:"Booked"}),e.jsx(i,{value:"locked",children:"Locked"}),e.jsx(i,{value:"sold",children:"Sold"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Airline"}),e.jsxs(y,{value:g,onValueChange:L,disabled:t,children:[e.jsx(w,{className:"font-body mt-1",children:e.jsx(C,{placeholder:"Filter by airline"})}),e.jsxs(S,{children:[e.jsx(i,{value:"all",children:"All Airlines"}),U.map(s=>e.jsx(i,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Sort by Price"}),e.jsxs(y,{value:P,onValueChange:q,disabled:t,children:[e.jsx(w,{className:"font-body mt-1",children:e.jsx(C,{placeholder:"Sort by price"})}),e.jsxs(S,{children:[e.jsx(i,{value:"asc",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Price: Low to High"]})}),e.jsx(i,{value:"desc",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Price: High to Low"]})})]})]})]}),(f||u!=="all"||g!=="all")&&e.jsx(r,{variant:"outline",onClick:()=>{T(""),B("all"),L("all"),G(!1)},className:"w-full font-body",children:"Clear All Filters"})]})]})]}),e.jsx("div",{className:"font-body text-sm text-foreground/70",children:t?e.jsx(c,{className:"h-4 w-20"}):`${j.length} found`})]})]})}),(f||u!=="all"||g!=="all")&&e.jsx("div",{className:"hidden md:block mt-4 pt-4 border-t",children:e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{T(""),B("all"),L("all")},className:"font-body",children:"Clear Filters"})})]})]})}),t&&e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:o==="grid"?"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6":"space-y-4",children:[...Array(6)].map((s,a)=>e.jsxs(I,{className:"luxury-card border-0",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(c,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"h-4 w-20"}),e.jsx(c,{className:"h-3 w-16"})]})]}),e.jsx(c,{className:"h-6 w-16"})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{className:"h-4 w-full"}),e.jsx(c,{className:"h-4 w-full"})]}),e.jsx(c,{className:"h-16 w-full"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(c,{className:"h-4 w-20"}),e.jsx(c,{className:"h-6 w-24"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{className:"h-8 flex-1"}),e.jsx(c,{className:"h-8 flex-1"})]})]})})]},a))}),A&&!t&&e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h3",{className:"text-xl font-heading font-bold text-foreground mb-2",children:"Error Loading Flights"}),e.jsx("p",{className:"text-foreground/60 font-body mb-4",children:A}),e.jsx(r,{onClick:()=>v(),className:"velvet-button",children:"Try Again"})]}),!t&&!A&&e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:o==="grid"?"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6":"space-y-4",children:j.map((s,a)=>e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05,duration:.3},children:e.jsxs(I,{className:`luxury-card border-0 ${o==="list"?"":"h-full"} ${s.status==="sold"?"opacity-75":""} hover:shadow-2xl transition-all duration-300 group`,children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:`flex items-center justify-between ${o==="list"?"flex-row":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-luxury-gold/20 to-luxury-bronze/20 rounded-full",children:e.jsx(D,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(he,{className:"font-heading text-lg velvet-text",children:s.batch.airline_name}),e.jsx(He,{className:"font-body text-sm",children:s.flight_number})]})]}),Z(s.status)]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:`grid ${o==="list"?"grid-cols-4":"grid-cols-2"} gap-4`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-4 w-4 text-foreground/40"}),e.jsx("span",{className:"font-body text-sm text-foreground",children:X(s.batch.flight_date)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-4 w-4 text-foreground/40"}),e.jsx("span",{className:"font-body text-sm text-foreground",children:Y(s.batch.flight_time)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4 text-foreground/40"}),e.jsx("span",{className:"font-body text-sm text-foreground",children:s.terminal||"Terminal 1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"h-4 w-4 text-foreground/40"}),e.jsx("span",{className:"font-body text-sm text-foreground",children:s.aircraft||"Boeing 737"})]})]}),o==="list"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-4 w-4 text-foreground/40"}),e.jsxs("span",{className:"font-body text-sm text-foreground",children:[s.available_seats,"/",s.total_seats," ","seats"]})]}),e.jsxs("div",{className:"text-xs text-foreground/60 font-body",children:["Agent: ",s.batch.agent_name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx($,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"font-heading font-bold text-lg text-green-600",children:["à§³",s.selling_price.toLocaleString()]})]}),R&&s.batch.buying_price&&e.jsxs("div",{className:"text-xs text-foreground/60 font-body",children:["Cost: à§³",s.batch.buying_price.toLocaleString()]})]})]})]}),o==="grid"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-cream-100 to-cream-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-body",children:[e.jsx("span",{className:"text-foreground",children:"Dhaka (DAC)"}),e.jsxs("div",{className:"flex items-center space-x-2 text-foreground/60",children:[e.jsx("div",{className:"w-8 border-t border-foreground/30"}),e.jsx(D,{className:"h-4 w-4"}),e.jsx("div",{className:"w-8 border-t border-foreground/30"})]}),e.jsx("span",{className:"text-foreground",children:x.code})]}),e.jsx("div",{className:"text-center mt-1",children:e.jsx("span",{className:"text-xs text-foreground/60 font-body",children:s.duration||"4h 15m"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-4 w-4 text-foreground/40"}),e.jsxs("span",{className:"font-body text-sm text-foreground",children:[s.available_seats,"/",s.total_seats," seats"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"font-heading font-bold text-lg text-green-600",children:["à§³",s.selling_price.toLocaleString()]})]}),R&&s.batch.buying_price&&e.jsxs("div",{className:"text-xs text-foreground/60 font-body",children:["Cost: à§³",s.batch.buying_price.toLocaleString()]})]})]}),e.jsxs("div",{className:"text-xs text-foreground/60 font-body border-t pt-2",children:["Agent: ",s.batch.agent_name,s.batch.agent_contact&&e.jsxs("span",{className:"ml-2",children:["â€¢ ",s.batch.agent_contact]})]})]}),e.jsxs("div",{className:`flex space-x-2 pt-2 ${o==="list"?"justify-end":""}`,children:[e.jsxs(r,{onClick:()=>_e(s.id),variant:"outline",size:"sm",className:`${o==="list"?"":"flex-1"} font-body hover:scale-105 transform transition-all duration-200`,children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Details"}),e.jsx("span",{className:"sm:hidden",children:"View"})]}),s.status==="available"&&s.available_seats>0&&e.jsxs(r,{onClick:()=>ee(s.id),size:"sm",className:`${o==="list"?"":"flex-1"} velvet-button text-primary-foreground font-body hover:scale-105 transform transition-all duration-200`,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Book Now"}),e.jsx("span",{className:"sm:hidden",children:"Book"})]}),s.status==="available"&&s.available_seats===0&&e.jsx(r,{disabled:!0,size:"sm",className:`${o==="list"?"":"flex-1"} font-body`,variant:"outline",children:"No Seats"}),s.status==="sold"&&e.jsx(r,{disabled:!0,size:"sm",className:`${o==="list"?"":"flex-1"} font-body`,variant:"outline",children:"Sold Out"})]})]})]})},s.id))}),!t&&!A&&j.length===0&&e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âœˆï¸"}),e.jsx("h3",{className:"text-xl font-heading font-bold text-foreground mb-2",children:h.length===0?"No flights available":"No flights found"}),e.jsx("p",{className:"text-foreground/60 font-body mb-4",children:h.length===0?`No tickets are currently available for ${x.name}`:"Try adjusting your filters to see more results"}),h.length===0&&e.jsxs(r,{onClick:()=>v(),variant:"outline",className:"font-body",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(Ie,{open:pe,onOpenChange:F,children:e.jsxs(Ve,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Me,{children:[e.jsx(Ke,{className:"font-heading velvet-text",children:"Flight Details"}),e.jsx(We,{children:"Complete information about this flight ticket"})]}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-cream-100 to-cream-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-full",children:e.jsx(D,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:l.batch.airline_name}),e.jsx("p",{className:"text-sm text-foreground/70",children:l.flight_number})]})]}),Z(l.status)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-heading font-semibold text-lg",children:"Flight Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce,{className:"h-4 w-4 text-foreground/40"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Departure Date"}),e.jsx("p",{className:"font-medium",children:X(l.batch.flight_date)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{className:"h-4 w-4 text-foreground/40"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Departure Time"}),e.jsx("p",{className:"font-medium",children:Y(l.batch.flight_time)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oe,{className:"h-4 w-4 text-foreground/40"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Terminal"}),e.jsx("p",{className:"font-medium",children:l.terminal||"Terminal 1"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xe,{className:"h-4 w-4 text-foreground/40"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Aircraft"}),e.jsx("p",{className:"font-medium",children:l.aircraft||"Boeing 737"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-heading font-semibold text-lg",children:"Pricing & Availability"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx($,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Selling Price"}),e.jsxs("p",{className:"font-medium text-green-600 text-lg",children:["à§³",l.selling_price.toLocaleString()]})]})]}),R&&l.batch.buying_price&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx($,{className:"h-4 w-4 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Buying Price"}),e.jsxs("p",{className:"font-medium text-orange-600",children:["à§³",l.batch.buying_price.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Seat Availability"}),e.jsxs("p",{className:"font-medium",children:[l.available_seats," of"," ",l.total_seats," available"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${ke(l.available_seats,l.total_seats)}%`}})})]})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[e.jsx("h4",{className:"font-heading font-semibold text-lg mb-3",children:"Route"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-lg",children:"DAC"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Dhaka"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Bangladesh"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-foreground/60",children:[e.jsx("div",{className:"w-12 border-t border-foreground/30"}),e.jsx(D,{className:"h-5 w-5"}),e.jsx("div",{className:"w-12 border-t border-foreground/30"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-lg",children:x.code}),e.jsx("p",{className:"text-sm text-foreground/60",children:x.name}),e.jsx("p",{className:"text-sm text-foreground/60",children:l.duration||"4h 15m"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg",children:[e.jsx("h4",{className:"font-heading font-semibold text-lg mb-3",children:"Agent Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Agent Name"}),e.jsx("p",{className:"font-medium",children:l.batch.agent_name})]}),l.batch.agent_contact&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Contact"}),e.jsx("p",{className:"font-medium",children:l.batch.agent_contact})]}),l.batch.agent_address&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Address"}),e.jsx("p",{className:"font-medium",children:l.batch.agent_address})]})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[l.status==="available"&&e.jsxs(r,{onClick:()=>{ee(l.id),F(!1)},className:"flex-1 velvet-button text-primary-foreground font-body",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Book This Flight"]}),e.jsx(r,{variant:"outline",onClick:()=>F(!1),className:"font-body",children:"Close"})]})]})]})}),e.jsx(qe,{isOpen:ve,onClose:()=>{z(!1),E(null)},ticket:ye,onSubmit:Se})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-heading font-bold text-foreground mb-4",children:"Country Not Found"}),e.jsx("p",{className:"text-foreground/70 font-body mb-6",children:"The requested country could not be found."}),e.jsx(se,{to:"/countries",children:e.jsxs(r,{className:"velvet-button text-primary-foreground font-body",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Back to Countries"]})})]})}export{Ze as C};
