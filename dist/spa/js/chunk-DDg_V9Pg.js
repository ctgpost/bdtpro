var Sa=Object.defineProperty;var Ca=(s,t,a)=>t in s?Sa(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var U=(s,t,a)=>Ca(s,typeof t!="symbol"?t+"":t,a);import{r,j as e,V as se,R as re,A as oe,C as ne,X as _,T as ie,D as le,P as Ta,a as de,b as Ra,S as Da,c as ce,d as Pa,e as Ia,f as me,g as _a,h as Aa,i as ue,k as Ea,l as $a,u as Ma,B as Y,m as O,n as Oa,I as za,o as pe,p as La,q as fe,s as K,t as Ba,W as ge,v as Fa,w as Ua,N as Va,M as Xa,L as Z,x as H,U as P,y as Ha,z as qa,G as Ga,E as Wa,F as Ja,H as Qa,J as Ya,K as D,O as Ka,Q as Za,Y as xe,Z as he,_ as et,$ as be,a0 as at,a1 as ye,a2 as Ne,a3 as tt,a4 as je,a5 as st,a6 as ve,a7 as rt,a8 as we,a9 as ke,aa as ot,ab as nt,ac as Se,ad as it,ae as lt,af as z,ag as Ce,ah as L,ai as Te,aj as B,ak as F,al as Re,am as De,an as Pe,ao as dt,ap as Ie,aq as _e,ar as Ae,as as ct,at as Ee,au as mt,av as $e,aw as ut,ax as Me,ay as Oe,az as ze,aA as Le,aB as Be,aC as pt,aD as Fe,aE as Ue,aF as ft,aG as gt,aH as Ve,aI as xt,aJ as Xe,aK as ht,aL as He,aM as qe,aN as Ge,aO as We,aP as Je,aQ as bt,aR as yt}from"./chunk-DgDPklex.js";import{c as A,j as Nt,$ as jt}from"./chunk-BQSuEa5o.js";import{c as i,a as k}from"./chunk-DVULmWha.js";import{m as S,A as Qe}from"./chunk-CbcvW3Ig.js";const vt=1,wt=1e6;let V=0;function kt(){return V=(V+1)%Number.MAX_SAFE_INTEGER,V.toString()}const X=new Map,ee=s=>{if(X.has(s))return;const t=setTimeout(()=>{X.delete(s),I({type:"REMOVE_TOAST",toastId:s})},wt);X.set(s,t)},St=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,vt)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?ee(a):s.toasts.forEach(o=>{ee(o.id)}),{...s,toasts:s.toasts.map(o=>o.id===a||a===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},E=[];let $={toasts:[]};function I(s){$=St($,s),E.forEach(t=>{t($)})}function Ct({...s}){const t=kt(),a=n=>I({type:"UPDATE_TOAST",toast:{...n,id:t}}),o=()=>I({type:"DISMISS_TOAST",toastId:t});return I({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:n=>{n||o()}}}),{id:t,dismiss:o,update:a}}function Ye(){const[s,t]=r.useState($);return r.useEffect(()=>(E.push(t),()=>{const a=E.indexOf(t);a>-1&&E.splice(a,1)}),[s]),{...s,toast:Ct,dismiss:a=>I({type:"DISMISS_TOAST",toastId:a})}}const Tt=Ta,Ke=r.forwardRef(({className:s,...t},a)=>e.jsx(se,{ref:a,className:i("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));Ke.displayName=se.displayName;const Rt=A("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ze=r.forwardRef(({className:s,variant:t,...a},o)=>e.jsx(re,{ref:o,className:i(Rt({variant:t}),s),...a}));Ze.displayName=re.displayName;const Dt=r.forwardRef(({className:s,...t},a)=>e.jsx(oe,{ref:a,className:i("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));Dt.displayName=oe.displayName;const ea=r.forwardRef(({className:s,...t},a)=>e.jsx(ne,{ref:a,className:i("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(_,{className:"h-4 w-4"})}));ea.displayName=ne.displayName;const aa=r.forwardRef(({className:s,...t},a)=>e.jsx(ie,{ref:a,className:i("text-sm font-semibold",s),...t}));aa.displayName=ie.displayName;const ta=r.forwardRef(({className:s,...t},a)=>e.jsx(le,{ref:a,className:i("text-sm opacity-90",s),...t}));ta.displayName=le.displayName;function _s(){const{toasts:s}=Ye();return e.jsxs(Tt,{children:[s.map(function({id:t,title:a,description:o,action:n,...m}){return e.jsxs(Ze,{...m,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(aa,{children:a}),o&&e.jsx(ta,{children:o})]}),n,e.jsx(ea,{})]},t)}),e.jsx(Ke,{})]})}const As=({...s})=>{const{theme:t="system"}=Nt();return e.jsx(jt,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},Es=Ra,Pt=r.forwardRef(({className:s,sideOffset:t=4,...a},o)=>e.jsx(de,{ref:o,sideOffset:t,className:i("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));Pt.displayName=de.displayName;const sa=r.createContext(void 0),It={admin:["view_buying_price","edit_batches","delete_batches","create_batches","view_profit","override_locks","manage_users","view_all_bookings","confirm_sales","system_settings"],manager:["view_tickets","create_bookings","confirm_sales","view_all_bookings"],staff:["view_tickets","create_bookings","partial_payments"]};function $s({children:s}){const[t,a]=r.useState(null),[o,n]=r.useState(!0);r.useEffect(()=>{const f=setTimeout(()=>{},100);return()=>clearTimeout(f)},[]),r.useEffect(()=>{const c=localStorage.getItem("bd_ticket_pro_token"),f=localStorage.getItem("bd_ticket_pro_user");if(c&&f)try{const C=JSON.parse(f);a(C),k.getCurrentUser().then(T=>{a(T)}).catch(T=>{console.warn("Token verification failed:",T.message),localStorage.removeItem("bd_ticket_pro_token"),localStorage.removeItem("bd_ticket_pro_user"),a(null)})}catch(C){console.error("Error parsing stored user data:",C),localStorage.removeItem("bd_ticket_pro_token"),localStorage.removeItem("bd_ticket_pro_user")}n(!1)},[]);const d={user:t,login:async c=>{try{const f=await k.login(c);return a(f.user),!0}catch(f){return console.error("Login error:",f),!1}},logout:()=>{a(null),localStorage.removeItem("bd_ticket_pro_token"),localStorage.removeItem("bd_ticket_pro_user"),k.authToken=null,k.logout().catch(console.error)},hasPermission:c=>t&&It[t.role]?.includes(c)||!1,isRole:c=>t?.role===c,loading:o,updateUser:c=>{if(t){const f={...t,...c};a(f),localStorage.setItem("bd_ticket_pro_user",JSON.stringify(f))}}};return e.jsx(sa.Provider,{value:d,children:s})}function _t(){const s=r.useContext(sa);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}const J=A("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),y=r.forwardRef(({className:s,variant:t,size:a,asChild:o=!1,...n},m)=>{const h=o?Da:"button";return e.jsx(h,{className:i(J({variant:t,size:a,className:s})),ref:m,...n})});y.displayName="Button";const At=A("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Et({className:s,variant:t,...a}){return e.jsx("div",{className:i(At({variant:t}),s),...a})}const ra=r.forwardRef(({className:s,children:t,...a},o)=>e.jsxs(ce,{ref:o,className:i("relative overflow-hidden",s),...a,children:[e.jsx(Pa,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(oa,{}),e.jsx(Ia,{})]}));ra.displayName=ce.displayName;const oa=r.forwardRef(({className:s,orientation:t="vertical",...a},o)=>e.jsx(me,{ref:o,orientation:t,className:i("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...a,children:e.jsx(_a,{className:"relative flex-1 rounded-full bg-border"})}));oa.displayName=me.displayName;const $t=Ea,Mt=$a,na=r.forwardRef(({className:s,align:t="center",sideOffset:a=4,...o},n)=>e.jsx(Aa,{children:e.jsx(ue,{ref:n,align:t,sideOffset:a,className:i("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})}));na.displayName=ue.displayName;function Ot({className:s}){const[t,a]=r.useState([]),[o,n]=r.useState(0),[m,h]=r.useState(!1),j=Ma(),{toast:b}=Ye(),u=async()=>{try{const[l,g]=await Promise.all([k.getDashboardStats().catch(()=>null),k.getBookings({limit:5}).catch(()=>[])]),x=[];l&&l.totalInventory<50&&x.push({id:`low-inventory-${Date.now()}`,type:"warning",title:"Low Inventory Alert",message:`Only ${l.totalInventory} tickets remaining in total inventory`,timestamp:new Date().toISOString(),isRead:!1,isImportant:!0,actionUrl:"/countries",actionLabel:"Check Inventory"}),l&&l.lockedTickets>0&&x.push({id:`locked-tickets-${Date.now()}`,type:"info",title:"Locked Tickets",message:`${l.lockedTickets} tickets are currently locked and need attention`,timestamp:new Date(Date.now()-600*1e3).toISOString(),isRead:!1,isImportant:!1,actionUrl:"/bookings",actionLabel:"View Locked Tickets"}),g&&g.length>0&&g.slice(0,2).forEach((v,R)=>{x.push({id:`booking-${v.id}`,type:"booking",title:"New Booking",message:`Booking for ${v.passenger_name} - ${v.agent_name}`,timestamp:new Date(Date.now()-(R+1)*15*60*1e3).toISOString(),isRead:!1,isImportant:!0,actionUrl:"/bookings",actionLabel:"View Booking",data:{bookingId:v.id}})}),l&&l.todaysSales.count>0&&x.push({id:`todays-sales-${Date.now()}`,type:"success",title:"Today's Sales Update",message:`${l.todaysSales.count} tickets sold today for ৳${l.todaysSales.amount.toLocaleString()}`,timestamp:new Date(Date.now()-1800*1e3).toISOString(),isRead:!1,isImportant:!1,actionUrl:"/reports",actionLabel:"View Reports"}),x.push({id:`system-status-${Date.now()}`,type:"system",title:"System Status",message:"BD TicketPro is running smoothly. All systems operational.",timestamp:new Date(Date.now()-7200*1e3).toISOString(),isRead:!0,isImportant:!1}),a(x),c(x)}catch(l){console.error("Failed to load notifications:",l),d()}},d=()=>{const l=[{id:"1",type:"booking",title:"New Booking Confirmed",message:"Rahman Travel Agency has confirmed a booking for Dubai flight DXB-123",timestamp:new Date(Date.now()-3e5).toISOString(),isRead:!1,isImportant:!0,actionUrl:"/bookings",actionLabel:"View Booking"},{id:"2",type:"payment",title:"Payment Received",message:"Received ৳25,000 payment from Golden Travel for booking GT-456",timestamp:new Date(Date.now()-9e5).toISOString(),isRead:!1,isImportant:!1,actionUrl:"/bookings",actionLabel:"View Payment"},{id:"3",type:"warning",title:"Low Inventory Alert",message:"Only 3 tickets remaining for UAE flights on 2024-08-15",timestamp:new Date(Date.now()-18e5).toISOString(),isRead:!1,isImportant:!0,actionUrl:"/tickets?country=UAE",actionLabel:"Check Inventory"},{id:"4",type:"system",title:"Daily Backup Complete",message:"System backup completed successfully at 12:00 AM",timestamp:new Date(Date.now()-72e5).toISOString(),isRead:!0,isImportant:!1},{id:"5",type:"info",title:"New Agent Registration",message:"Sky Way Travel has registered as a new agent",timestamp:new Date(Date.now()-108e5).toISOString(),isRead:!0,isImportant:!1,actionUrl:"/agents",actionLabel:"View Profile"}];a(l),c(l)};r.useEffect(()=>{u();const l=setInterval(u,300*1e3);return()=>clearInterval(l)},[]);const c=l=>{const g=l.filter(x=>!x.isRead).length;n(g)},f=l=>{const g=t.map(x=>x.id===l?{...x,isRead:!0}:x);a(g),c(g)},C=()=>{const l=t.map(g=>({...g,isRead:!0}));a(l),c(l)},T=l=>{const g=t.filter(x=>x.id!==l);a(g),c(g)},ja=()=>{a([]),n(0)},va=l=>{switch(l){case"success":return e.jsx(Ba,{className:"h-5 w-5 text-green-500"});case"warning":return e.jsx(K,{className:"h-5 w-5 text-yellow-500"});case"error":return e.jsx(K,{className:"h-5 w-5 text-red-500"});case"booking":return e.jsx(fe,{className:"h-5 w-5 text-blue-500"});case"payment":return e.jsx(La,{className:"h-5 w-5 text-green-500"});case"system":return e.jsx(pe,{className:"h-5 w-5 text-gray-500"});default:return e.jsx(za,{className:"h-5 w-5 text-blue-500"})}},wa=l=>{switch(l){case"success":return"border-l-green-500 bg-green-50";case"warning":return"border-l-yellow-500 bg-yellow-50";case"error":return"border-l-red-500 bg-red-50";case"booking":return"border-l-blue-500 bg-blue-50";case"payment":return"border-l-green-500 bg-green-50";case"system":return"border-l-gray-500 bg-gray-50";default:return"border-l-blue-500 bg-blue-50"}},ka=l=>{const g=new Date,x=new Date(l),v=Math.floor((g.getTime()-x.getTime())/(1e3*60));if(v<1)return"Just now";if(v<60)return`${v}m ago`;const R=Math.floor(v/60);return R<24?`${R}h ago`:`${Math.floor(R/24)}d ago`},Q=m?t:t.slice(0,5);return e.jsxs($t,{children:[e.jsx(Mt,{asChild:!0,children:e.jsxs(y,{variant:"ghost",className:`relative ${s}`,children:[e.jsx(Y,{className:"h-5 w-5"}),o>0&&e.jsx(S.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:o>9?"9+":o})]})}),e.jsxs(na,{className:"w-96 p-0",align:"end",children:[e.jsxs("div",{className:"border-b p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[o>0&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:C,children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),"Mark all read"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:ja,children:e.jsx(Oa,{className:"h-4 w-4"})})]})]}),o>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o," unread notification",o!==1?"s":""]})]}),e.jsx(ra,{className:"max-h-96",children:e.jsx("div",{className:"p-2",children:Q.length>0?e.jsx(Qe,{children:Q.map(l=>e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`border-l-4 rounded-lg p-3 mb-2 relative ${wa(l.type)} ${l.isRead?"":"ring-2 ring-blue-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:va(l.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:l.title}),l.isImportant&&e.jsx(Et,{variant:"destructive",className:"text-xs px-1.5 py-0.5",children:"Important"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:l.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:ka(l.timestamp)}),e.jsxs("div",{className:"flex items-center gap-1",children:[l.actionUrl&&l.actionLabel&&e.jsx(y,{variant:"outline",size:"sm",className:"text-xs h-6 hover:bg-primary hover:text-primary-foreground",onClick:g=>{g.stopPropagation(),j(l.actionUrl),f(l.id),b({title:"Navigating",description:`Opening ${l.actionLabel}`})},children:l.actionLabel}),!l.isRead&&e.jsx(y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>f(l.id),children:e.jsx(O,{className:"h-3 w-3"})}),e.jsx(y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>T(l.id),children:e.jsx(_,{className:"h-3 w-3"})})]})]})]})]})},l.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Y,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No notifications"}),e.jsx("p",{className:"text-sm",children:"You're all caught up!"})]})})}),t.length>5&&e.jsx("div",{className:"border-t p-3",children:e.jsx(y,{variant:"ghost",className:"w-full text-sm",onClick:()=>h(!m),children:m?"Show less":`View all ${t.length} notifications`})})]})]})}function zt(){const[s,t]=r.useState(navigator.onLine),[a,o]=r.useState(!1);return r.useEffect(()=>{const n=()=>{t(!0),o(!0),setTimeout(()=>o(!1),3e3)},m=()=>{t(!1),o(!0)};return window.addEventListener("online",n),window.addEventListener("offline",m),navigator.onLine||o(!0),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",m)}},[]),e.jsx(Qe,{children:a&&e.jsxs(S.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:`fixed top-4 right-4 z-50 px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2 ${s?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[s?e.jsx(ge,{className:"h-4 w-4"}):e.jsx(Fa,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:s?"Back online":"No internet connection"})]})})}function Ms({children:s}){const{user:t,logout:a,hasPermission:o}=_t(),n=Ua(),[m,h]=r.useState(!1);if(!t)return e.jsx(Va,{to:"/login",replace:!0});const b=[{path:"/dashboard",label:"Dashboard",icon:e.jsx(qa,{className:"h-4 w-4"})},{path:"/countries",label:"Countries",icon:e.jsx(Ga,{className:"h-4 w-4"})},{path:"/tickets",label:"Tickets",icon:e.jsx(fe,{className:"h-4 w-4"})},{path:"/bookings",label:"Bookings",icon:e.jsx(Wa,{className:"h-4 w-4"})},{path:"/umrah",label:"Umrah Management",icon:e.jsx(Ja,{className:"h-4 w-4"})},{path:"/admin/buying",label:"Buy Tickets",icon:e.jsx(Qa,{className:"h-4 w-4"}),permission:"create_batches"},{path:"/reports",label:"Reports",icon:e.jsx(Ya,{className:"h-4 w-4"}),permission:"view_profit"},{path:"/settings",label:"Settings",icon:e.jsx(pe,{className:"h-4 w-4"})}].filter(c=>!c.permission||o(c.permission)),u=()=>{a()},d=({item:c})=>{const f=n.pathname===c.path;return e.jsxs(Z,{to:c.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg font-body font-medium transition-all duration-300 transform hover:scale-105 ${f?"velvet-button text-primary-foreground shadow-lg":"text-foreground hover:bg-gradient-to-r hover:from-cream-200 hover:to-cream-300 hover:shadow-md"}`,onClick:()=>h(!1),children:[c.icon,e.jsx("span",{children:c.label})]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-cream-50 via-luxury-pearl to-cream-100",children:[e.jsx(zt,{}),e.jsx("header",{className:"luxury-card shadow-lg border-b border-border/30 backdrop-blur-md bg-gradient-to-r from-card to-cream-100",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>h(!m),className:"md:hidden p-2 rounded-lg hover:bg-cream-200/50 transition-all duration-200",children:m?e.jsx(_,{className:"h-5 w-5"}):e.jsx(Xa,{className:"h-5 w-5"})}),e.jsxs(Z,{to:"/dashboard",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-luxury-gold to-luxury-bronze rounded-lg animate-glow",children:e.jsx(H,{className:"h-5 w-5 text-white"})}),e.jsx("div",{children:e.jsx("h1",{className:"font-heading font-bold text-lg velvet-text",children:"BD TicketPro"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ot,{}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 animate-luxury-fade",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-cream-200 to-cream-300 rounded-full",children:e.jsx(P,{className:"h-4 w-4 text-foreground/70"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-body font-medium text-sm text-foreground",children:t.name}),e.jsx("p",{className:"font-body text-xs text-foreground/60 capitalize",children:t.role})]})]}),e.jsxs(y,{onClick:u,variant:"outline",size:"sm",className:"font-body hover:scale-105 transform transition-all duration-200 border-border/50",children:[e.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:"hidden md:flex md:flex-col w-64 luxury-card shadow-lg border-r border-border/30 h-[calc(100vh-73px)] backdrop-blur-md",children:[e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:b.map(c=>e.jsx(d,{item:c},c.path))}),e.jsx("div",{className:"p-4 border-t border-border/30 bg-gradient-to-r from-cream-100 to-cream-200",children:e.jsxs("div",{className:"flex items-center space-x-3 animate-velvet-slide",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-luxury-gold/20 to-luxury-bronze/20 rounded-full",children:e.jsx(P,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-body font-medium text-sm text-foreground",children:t.name}),e.jsxs("p",{className:"font-body text-xs text-foreground/60 capitalize",children:[t.role," Account"]})]})]})})]}),m&&e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>h(!1),children:e.jsxs(S.aside,{initial:{x:-300},animate:{x:0},exit:{x:-300},className:"w-64 luxury-card h-full shadow-2xl backdrop-blur-md",onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:"p-4 border-b border-border/30",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-luxury-gold to-luxury-bronze rounded-lg animate-glow",children:e.jsx(H,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"font-heading font-bold text-lg velvet-text",children:"BD TicketPro"})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:b.map(c=>e.jsx(d,{item:c},c.path))}),e.jsx("div",{className:"p-4 border-t border-border/30 bg-gradient-to-r from-cream-100 to-cream-200",children:e.jsxs("div",{className:"flex items-center space-x-3 animate-velvet-slide",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-luxury-gold/20 to-luxury-bronze/20 rounded-full",children:e.jsx(P,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-body font-medium text-sm text-foreground",children:t.name}),e.jsxs("p",{className:"font-body text-xs text-foreground/60 capitalize",children:[t.role," Account"]})]})]})})]})}),e.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gradient-to-br from-transparent to-cream-50/30",children:e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},children:s},n.pathname)})]})]})}class Os extends r.Component{constructor(){super(...arguments);U(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,o){console.error("ErrorBoundary caught an error:",a,o)}render(){return this.state.hasError?this.props.fallback||e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-cream-50 via-luxury-pearl to-cream-100",children:e.jsxs("div",{className:"text-center p-8 max-w-md mx-auto",children:[e.jsxs("div",{className:"p-4 bg-red-100 border border-red-200 rounded-lg mb-4",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-red-800 mb-2",children:"Application Error"}),e.jsx("p",{className:"text-sm text-red-600 font-body",children:this.state.error?.message||"Something went wrong. Please refresh the page."})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-body hover:opacity-90 transition-opacity",children:"Refresh Page"})]})}):this.props.children}}const ia=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:i("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));ia.displayName="Card";const la=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:i("flex flex-col space-y-1.5 p-6",s),...t}));la.displayName="CardHeader";const da=r.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:i("text-2xl font-semibold leading-none tracking-tight",s),...t}));da.displayName="CardTitle";const ca=r.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:i("text-sm text-muted-foreground",s),...t}));ca.displayName="CardDescription";const ma=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:i("p-6 pt-0",s),...t}));ma.displayName="CardContent";const Lt=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:i("flex items-center p-6 pt-0",s),...t}));Lt.displayName="CardFooter";class zs extends D.Component{constructor(a){super(a);U(this,"handleRetry",()=>{this.setState(a=>({hasError:!1,errorMessage:"",retryCount:a.retryCount+1}))});this.state={hasError:!1,errorMessage:"",retryCount:0}}static getDerivedStateFromError(a){if(a.message.includes("Failed to fetch")||a.message.includes("Network error")||a.message.includes("Unable to connect"))return{hasError:!0,errorMessage:a.message,retryCount:0};throw a}componentDidCatch(a,o){console.error("Network error caught by boundary:",a,o)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-4",children:e.jsxs(ia,{className:"w-full max-w-md",children:[e.jsxs(la,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 p-3 bg-red-100 rounded-full w-fit",children:e.jsx(ge,{className:"h-8 w-8 text-red-600"})}),e.jsx(da,{className:"text-xl font-heading",children:"Connection Problem"}),e.jsx(ca,{className:"font-body",children:"Unable to connect to the server. Please check your internet connection."})]}),e.jsxs(ma,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground p-3 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ka,{className:"h-4 w-4 mt-0.5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Troubleshooting tips:"}),e.jsxs("ul",{className:"mt-1 space-y-1 text-xs",children:[e.jsx("li",{children:"• Check your internet connection"}),e.jsx("li",{children:"• Refresh the page"}),e.jsx("li",{children:"• Try again in a few moments"})]})]})]})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(y,{onClick:this.handleRetry,className:"w-full",children:[e.jsx(Za,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsx(y,{variant:"outline",onClick:()=>window.location.reload(),className:"w-full",children:"Refresh Page"})]}),this.state.retryCount>2&&e.jsx("div",{className:"text-xs text-muted-foreground text-center p-2 bg-muted rounded",children:"Still having issues? Try refreshing the entire page or contact support."})]})]})}):this.props.children}}function Ls(){const[s,t]=D.useState(null),a=D.useCallback(m=>m.message.includes("Failed to fetch")||m.message.includes("Network error")||m.message.includes("Unable to connect")?(t(m.message),!0):!1,[]),o=D.useCallback(()=>{t(null)},[]),n=D.useCallback(async(m,h=2)=>{let j=0;for(;j<=h;)try{const b=await m();return o(),b}catch(b){if(b instanceof Error&&a(b)&&j<h){j++,await new Promise(u=>setTimeout(u,1e3*j));continue}throw b}},[a,o]);return{networkError:s,clearNetworkError:o,retryWithErrorHandler:n}}const N=r.forwardRef(({className:s,type:t,...a},o)=>e.jsx("input",{type:t,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:o,...a}));N.displayName="Input";const Bt=A("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=r.forwardRef(({className:s,...t},a)=>e.jsx(xe,{ref:a,className:i(Bt(),s),...t}));p.displayName=xe.displayName;const Ft=r.forwardRef(({className:s,value:t,...a},o)=>e.jsx(he,{ref:o,className:i("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...a,children:e.jsx(et,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ft.displayName=he.displayName;const ae=it,te=lt,q=r.forwardRef(({className:s,children:t,...a},o)=>e.jsxs(be,{ref:o,className:i("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(at,{asChild:!0,children:e.jsx(ye,{className:"h-4 w-4 opacity-50"})})]}));q.displayName=be.displayName;const ua=r.forwardRef(({className:s,...t},a)=>e.jsx(Ne,{ref:a,className:i("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(tt,{className:"h-4 w-4"})}));ua.displayName=Ne.displayName;const pa=r.forwardRef(({className:s,...t},a)=>e.jsx(je,{ref:a,className:i("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ye,{className:"h-4 w-4"})}));pa.displayName=je.displayName;const G=r.forwardRef(({className:s,children:t,position:a="popper",...o},n)=>e.jsx(st,{children:e.jsxs(ve,{ref:n,className:i("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...o,children:[e.jsx(ua,{}),e.jsx(rt,{className:i("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(pa,{})]})}));G.displayName=ve.displayName;const Ut=r.forwardRef(({className:s,...t},a)=>e.jsx(we,{ref:a,className:i("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));Ut.displayName=we.displayName;const w=r.forwardRef(({className:s,children:t,...a},o)=>e.jsxs(ke,{ref:o,className:i("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ot,{children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsx(nt,{children:t})]}));w.displayName=ke.displayName;const Vt=r.forwardRef(({className:s,...t},a)=>e.jsx(Se,{ref:a,className:i("-mx-1 my-1 h-px bg-muted",s),...t}));Vt.displayName=Se.displayName;function Bs({className:s,...t}){return e.jsx("div",{className:i("animate-pulse rounded-md bg-muted",s),...t})}const Xt=Re,Fs=De,Ht=Ce,fa=r.forwardRef(({className:s,...t},a)=>e.jsx(z,{ref:a,className:i("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));fa.displayName=z.displayName;const ga=r.forwardRef(({className:s,children:t,...a},o)=>e.jsxs(Ht,{children:[e.jsx(fa,{}),e.jsxs(L,{ref:o,className:i("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(Te,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ga.displayName=L.displayName;const xa=({className:s,...t})=>e.jsx("div",{className:i("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});xa.displayName="DialogHeader";const ha=r.forwardRef(({className:s,...t},a)=>e.jsx(B,{ref:a,className:i("text-lg font-semibold leading-none tracking-tight",s),...t}));ha.displayName=B.displayName;const ba=r.forwardRef(({className:s,...t},a)=>e.jsx(F,{ref:a,className:i("text-sm text-muted-foreground",s),...t}));ba.displayName=F.displayName;const W=r.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:i("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t}));W.displayName="Textarea";const M=r.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...o},n)=>e.jsx(Pe,{ref:n,decorative:a,orientation:t,className:i("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...o}));M.displayName=Pe.displayName;function Us({isOpen:s,onClose:t,ticket:a,onSubmit:o}){const[n,m]=r.useState({agentName:"",agentPhone:"",agentEmail:"",passengerName:"",passportNo:"",passengerPhone:"",passengerEmail:"",sellingPrice:a?.selling_price||0,paymentType:"full",partialAmount:0,paymentMethod:"cash",paymentDetails:"",comments:"",emergencyContact:"",specialRequests:""}),[h,j]=r.useState(!1);r.useEffect(()=>{a&&m(d=>({...d,sellingPrice:a.selling_price||0}))},[a]);const b=async d=>{d.preventDefault(),j(!0);try{await o({ticketId:a?.id,agentInfo:{name:n.agentName,phone:n.agentPhone,email:n.agentEmail},passengerInfo:{name:n.passengerName,passportNo:n.passportNo,phone:n.passengerPhone,email:n.passengerEmail,paxCount:1},sellingPrice:n.sellingPrice,paymentType:n.paymentType,partialAmount:n.partialAmount,paymentMethod:n.paymentMethod,paymentDetails:n.paymentDetails,comments:`${n.comments} | Emergency: ${n.emergencyContact} | Special: ${n.specialRequests}`})}catch(c){console.error("Booking submission failed:",c)}finally{j(!1)}},u=(d,c)=>{m(f=>({...f,[d]:c}))};return e.jsx(Xt,{open:s,onOpenChange:t,children:e.jsxs(ga,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(xa,{children:[e.jsxs(ha,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Create New Booking"]}),e.jsx(ba,{children:"Fill in the details to create a new booking for this flight ticket."})]}),a&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(p,{className:"text-xs text-gray-500",children:"Flight"}),e.jsx("p",{className:"font-medium",children:a.flight_number})]}),e.jsxs("div",{children:[e.jsx(p,{className:"text-xs text-gray-500",children:"Route"}),e.jsx("p",{className:"font-medium",children:a.batch?.country_code})]}),e.jsxs("div",{children:[e.jsx(p,{className:"text-xs text-gray-500",children:"Date"}),e.jsx("p",{className:"font-medium",children:new Date(a.batch?.flight_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(p,{className:"text-xs text-gray-500",children:"Base Price"}),e.jsxs("p",{className:"font-medium",children:["৳",a.selling_price?.toLocaleString()]})]})]})}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Agent Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"agentName",children:"Agency/Agent Name *"}),e.jsx(N,{id:"agentName",value:n.agentName,onChange:d=>u("agentName",d.target.value),placeholder:"Enter agency or agent name",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"agentPhone",children:"Phone Number"}),e.jsx(N,{id:"agentPhone",value:n.agentPhone,onChange:d=>u("agentPhone",d.target.value),placeholder:"+880-XXX-XXXXXX"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(p,{htmlFor:"agentEmail",children:"Email Address"}),e.jsx(N,{id:"agentEmail",type:"email",value:n.agentEmail,onChange:d=>u("agentEmail",d.target.value),placeholder:"agent@example.com"})]})]})]}),e.jsx(M,{}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Passenger Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"passengerName",children:"Passenger Name *"}),e.jsx(N,{id:"passengerName",value:n.passengerName,onChange:d=>u("passengerName",d.target.value),placeholder:"Full name as in passport",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"passportNo",children:"Passport Number *"}),e.jsx(N,{id:"passportNo",value:n.passportNo,onChange:d=>u("passportNo",d.target.value),placeholder:"Passport number",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"passengerPhone",children:"Phone Number *"}),e.jsx(N,{id:"passengerPhone",value:n.passengerPhone,onChange:d=>u("passengerPhone",d.target.value),placeholder:"+880-XXX-XXXXXX",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"passengerEmail",children:"Email Address"}),e.jsx(N,{id:"passengerEmail",type:"email",value:n.passengerEmail,onChange:d=>u("passengerEmail",d.target.value),placeholder:"passenger@example.com"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"emergencyContact",children:"Emergency Contact"}),e.jsx(N,{id:"emergencyContact",value:n.emergencyContact,onChange:d=>u("emergencyContact",d.target.value),placeholder:"Emergency contact number"})]})]})]}),e.jsx(M,{}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Payment Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"sellingPrice",children:"Selling Price (৳) *"}),e.jsx(N,{id:"sellingPrice",type:"number",min:"0",value:n.sellingPrice,onChange:d=>u("sellingPrice",parseFloat(d.target.value)),required:!0,className:a?.batch?.buying_price&&n.sellingPrice<a.batch.buying_price?"border-red-500 focus:border-red-500":""}),a?.batch?.buying_price&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Buying Price:"}),e.jsxs("span",{className:"font-medium",children:["৳",a.batch.buying_price.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Profit:"}),e.jsxs("span",{className:`font-medium ${n.sellingPrice-a.batch.buying_price>=0?"text-green-600":"text-red-600"}`,children:["৳",(n.sellingPrice-a.batch.buying_price).toLocaleString()]})]}),n.sellingPrice>0&&a.batch.buying_price>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Profit Margin:"}),e.jsxs("span",{className:`font-medium ${(n.sellingPrice-a.batch.buying_price)/n.sellingPrice*100>=0?"text-green-600":"text-red-600"}`,children:[((n.sellingPrice-a.batch.buying_price)/n.sellingPrice*100).toFixed(1),"%"]})]}),n.sellingPrice<a.batch.buying_price&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:"⚠️ Warning: Selling price is below buying price (Loss!)"}),n.sellingPrice<a.batch.buying_price*1.05&&n.sellingPrice>=a.batch.buying_price&&e.jsx("p",{className:"text-yellow-600 text-xs mt-1",children:"⚠️ Low profit margin (less than 5%)"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"paymentType",children:"Payment Type *"}),e.jsxs(ae,{value:n.paymentType,onValueChange:d=>u("paymentType",d),children:[e.jsx(q,{children:e.jsx(te,{})}),e.jsxs(G,{children:[e.jsx(w,{value:"full",children:"Full Payment"}),e.jsx(w,{value:"partial",children:"Partial Payment"})]})]})]}),n.paymentType==="partial"&&e.jsxs("div",{children:[e.jsx(p,{htmlFor:"partialAmount",children:"Advance Amount (৳)"}),e.jsx(N,{id:"partialAmount",type:"number",min:"0",max:n.sellingPrice,value:n.partialAmount,onChange:d=>u("partialAmount",parseFloat(d.target.value))})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"paymentMethod",children:"Payment Method"}),e.jsxs(ae,{value:n.paymentMethod,onValueChange:d=>u("paymentMethod",d),children:[e.jsx(q,{children:e.jsx(te,{})}),e.jsxs(G,{children:[e.jsx(w,{value:"cash",children:"Cash"}),e.jsx(w,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(w,{value:"mobile_banking",children:"Mobile Banking"}),e.jsx(w,{value:"credit_card",children:"Credit Card"}),e.jsx(w,{value:"check",children:"Check"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(p,{htmlFor:"paymentDetails",children:"Payment Details"}),e.jsx(N,{id:"paymentDetails",value:n.paymentDetails,onChange:d=>u("paymentDetails",d.target.value),placeholder:"Transaction ID, check number, etc."})]})]})]}),e.jsx(M,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"specialRequests",children:"Special Requests"}),e.jsx(W,{id:"specialRequests",value:n.specialRequests,onChange:d=>u("specialRequests",d.target.value),placeholder:"Meal preferences, wheelchair assistance, etc.",rows:2})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"comments",children:"Comments & Notes"}),e.jsx(W,{id:"comments",value:n.comments,onChange:d=>u("comments",d.target.value),placeholder:"Additional notes about this booking",rows:3})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:t,disabled:h,children:"Cancel"}),e.jsx(y,{type:"submit",disabled:h,children:h?"Creating Booking...":"Create Booking"})]})]})]})})}const Vs=Re,Xs=De,qt=Ce,ya=r.forwardRef(({className:s,...t},a)=>e.jsx(z,{className:i("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));ya.displayName=z.displayName;const Gt=A("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Wt=r.forwardRef(({side:s="right",className:t,children:a,...o},n)=>e.jsxs(qt,{children:[e.jsx(ya,{}),e.jsxs(L,{ref:n,className:i(Gt({side:s}),t),...o,children:[a,e.jsxs(Te,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wt.displayName=L.displayName;const Jt=({className:s,...t})=>e.jsx("div",{className:i("flex flex-col space-y-2 text-center sm:text-left",s),...t});Jt.displayName="SheetHeader";const Qt=r.forwardRef(({className:s,...t},a)=>e.jsx(B,{ref:a,className:i("text-lg font-semibold text-foreground",s),...t}));Qt.displayName=B.displayName;const Yt=r.forwardRef(({className:s,...t},a)=>e.jsx(F,{ref:a,className:i("text-sm text-muted-foreground",s),...t}));Yt.displayName=F.displayName;const Hs=ct,Kt=r.forwardRef(({className:s,...t},a)=>e.jsx(Ie,{ref:a,className:i("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Kt.displayName=Ie.displayName;const Zt=r.forwardRef(({className:s,...t},a)=>e.jsx(_e,{ref:a,className:i("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));Zt.displayName=_e.displayName;const es=r.forwardRef(({className:s,...t},a)=>e.jsx(Ae,{ref:a,className:i("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));es.displayName=Ae.displayName;const as=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:i("w-full caption-bottom text-sm",s),...t})}));as.displayName="Table";const ts=r.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:i("[&_tr]:border-b",s),...t}));ts.displayName="TableHeader";const ss=r.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:i("[&_tr:last-child]:border-0",s),...t}));ss.displayName="TableBody";const rs=r.forwardRef(({className:s,...t},a)=>e.jsx("tfoot",{ref:a,className:i("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));rs.displayName="TableFooter";const os=r.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:i("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));os.displayName="TableRow";const ns=r.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:i("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));ns.displayName="TableHead";const is=r.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:i("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));is.displayName="TableCell";const ls=r.forwardRef(({className:s,...t},a)=>e.jsx("caption",{ref:a,className:i("mt-4 text-sm text-muted-foreground",s),...t}));ls.displayName="TableCaption";const qs=ft,Gs=gt,ds=r.forwardRef(({className:s,inset:t,children:a,...o},n)=>e.jsxs(Ee,{ref:n,className:i("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...o,children:[a,e.jsx(mt,{className:"ml-auto h-4 w-4"})]}));ds.displayName=Ee.displayName;const cs=r.forwardRef(({className:s,...t},a)=>e.jsx($e,{ref:a,className:i("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));cs.displayName=$e.displayName;const ms=r.forwardRef(({className:s,sideOffset:t=4,...a},o)=>e.jsx(ut,{children:e.jsx(Me,{ref:o,sideOffset:t,className:i("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));ms.displayName=Me.displayName;const us=r.forwardRef(({className:s,inset:t,...a},o)=>e.jsx(Oe,{ref:o,className:i("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...a}));us.displayName=Oe.displayName;const ps=r.forwardRef(({className:s,children:t,checked:a,...o},n)=>e.jsxs(ze,{ref:n,className:i("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Le,{children:e.jsx(O,{className:"h-4 w-4"})})}),t]}));ps.displayName=ze.displayName;const fs=r.forwardRef(({className:s,children:t,...a},o)=>e.jsxs(Be,{ref:o,className:i("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Le,{children:e.jsx(pt,{className:"h-2 w-2 fill-current"})})}),t]}));fs.displayName=Be.displayName;const gs=r.forwardRef(({className:s,inset:t,...a},o)=>e.jsx(Fe,{ref:o,className:i("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));gs.displayName=Fe.displayName;const xs=r.forwardRef(({className:s,...t},a)=>e.jsx(Ue,{ref:a,className:i("-mx-1 my-1 h-px bg-muted",s),...t}));xs.displayName=Ue.displayName;const hs=r.forwardRef(({className:s,...t},a)=>e.jsx(Ve,{className:i("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:e.jsx(xt,{className:i("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));hs.displayName=Ve.displayName;const Ws=bt,Js=yt,bs=ht,Na=r.forwardRef(({className:s,...t},a)=>e.jsx(Xe,{className:i("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));Na.displayName=Xe.displayName;const ys=r.forwardRef(({className:s,...t},a)=>e.jsxs(bs,{children:[e.jsx(Na,{}),e.jsx(He,{ref:a,className:i("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));ys.displayName=He.displayName;const Ns=({className:s,...t})=>e.jsx("div",{className:i("flex flex-col space-y-2 text-center sm:text-left",s),...t});Ns.displayName="AlertDialogHeader";const js=({className:s,...t})=>e.jsx("div",{className:i("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});js.displayName="AlertDialogFooter";const vs=r.forwardRef(({className:s,...t},a)=>e.jsx(qe,{ref:a,className:i("text-lg font-semibold",s),...t}));vs.displayName=qe.displayName;const ws=r.forwardRef(({className:s,...t},a)=>e.jsx(Ge,{ref:a,className:i("text-sm text-muted-foreground",s),...t}));ws.displayName=Ge.displayName;const ks=r.forwardRef(({className:s,...t},a)=>e.jsx(We,{ref:a,className:i(J(),s),...t}));ks.displayName=We.displayName;const Ss=r.forwardRef(({className:s,...t},a)=>e.jsx(Je,{ref:a,className:i(J({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));Ss.displayName=Je.displayName;export{qs as $,ba as A,y as B,ia as C,Xt as D,Bs as E,Vs as F,Xs as G,Wt as H,N as I,Jt as J,Qt as K,p as L,Yt as M,Us as N,Ws as O,Ft as P,Js as Q,ys as R,ae as S,Hs as T,Ns as U,vs as V,ws as W,js as X,Ss as Y,ks as Z,hs as _,Ye as a,Gs as a0,ms as a1,us as a2,Os as a3,zs as a4,Es as a5,_s as a6,As as a7,$s as a8,Ms as a9,Et as b,ma as c,Kt as d,Zt as e,es as f,la as g,da as h,ca as i,q as j,te as k,G as l,w as m,W as n,Ls as o,as as p,ts as q,os as r,ns as s,ss as t,_t as u,is as v,Fs as w,ga as x,xa as y,ha as z};
